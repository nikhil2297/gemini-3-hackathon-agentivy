<div class="configure-page">
  <div class="configure-page__container">
    <!-- Header -->
    <div class="configure-page__header">
      <h1 class="configure-page__title">Configure Testing</h1>
      <p class="configure-page__subtitle">
        Select components and configure testing options for {{ repoInfo()?.repoUrl || 'your repository' }}
      </p>
    </div>

    <!-- Component Selection Section -->
    <section class="configure-section">
      <div class="configure-section__header">
        <h2 class="configure-section__title">Component Selection</h2>
        <p class="configure-section__subtitle">Choose components to test</p>
      </div>

      <div class="component-selector">
        <!-- Available Components -->
        <div class="component-pane">
          <div class="component-pane__header">
            <h3 class="component-pane__title">Available Components</h3>
            <span class="component-pane__count">{{ availableComponents().length }} components</span>
          </div>
          <div class="component-pane__list">
            @for (component of availableComponents(); track component) {
              <button
                type="button"
                class="component-item"
                (click)="selectComponent(component)"
              >
                <span class="component-item__name">{{ component }}</span>
                <svg class="component-item__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M5 12h14m-7-7l7 7-7 7"/>
                </svg>
              </button>
            }
            @if (availableComponents().length === 0) {
              <div class="component-pane__empty">
                <p class="component-pane__empty-text">No components available</p>
              </div>
            }
          </div>
        </div>

        <!-- Selected Components -->
        <div class="component-pane component-pane--selected">
          <div class="component-pane__header">
            <h3 class="component-pane__title">Selected Components</h3>
            <span class="component-pane__count">{{ selectedComponents().length }} selected</span>
          </div>
          <div class="component-pane__list">
            @for (component of selectedComponents(); track component) {
              <button
                type="button"
                class="component-item component-item--selected"
                (click)="deselectComponent(component)"
              >
                <svg class="component-item__icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M19 12H5m7 7l-7-7 7-7"/>
                </svg>
                <span class="component-item__name">{{ component }}</span>
              </button>
            }
            @if (selectedComponents().length === 0) {
              <div class="component-pane__empty">
                <p class="component-pane__empty-text">No components selected</p>
              </div>
            }
          </div>
        </div>
      </div>
    </section>

    <!-- Test Types Section -->
    <section class="configure-section">
      <div class="configure-section__header">
        <h2 class="configure-section__title">Test Types</h2>
        <p class="configure-section__subtitle">Select one or more test types</p>
      </div>

      <div class="test-options">
        @for (testType of testTypes; track testType.value) {
          <button
            type="button"
            class="option-card"
            [class.option-card--selected]="isTestTypeSelected(testType.value)"
            (click)="toggleTestType(testType.value)"
          >
            <div class="option-card__checkbox">
              @if (isTestTypeSelected(testType.value)) {
                <svg class="option-card__check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                  <path d="M5 12l5 5L20 7"/>
                </svg>
              }
            </div>
            <div class="option-card__content">
              <h3 class="option-card__title">{{ testType.label }}</h3>
              <p class="option-card__description">{{ testType.description }}</p>
            </div>
          </button>
        }
      </div>
    </section>

    <!-- Actions -->
    <div class="configure-page__actions">
      <app-button variant="secondary" (clicked)="goBack()">
        Back
      </app-button>
      <app-button
        variant="primary"
        size="lg"
        [disabled]="!canStartTesting()"
        (clicked)="startTesting()"
      >
        Start Testing
      </app-button>
    </div>
  </div>
</div>
